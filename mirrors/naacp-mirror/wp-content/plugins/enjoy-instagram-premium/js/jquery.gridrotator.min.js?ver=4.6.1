(function(e,k,t){function q(){var a=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var b=0;b<a.length;b++)if(a[b]+"Hidden"in document)return a[b]+"Hidden";return null}var r=e.event,n,p;n=r.special.debouncedresize={setup:function(){e(this).on("resize",n.handler)},teardown:function(){e(this).off("resize",n.handler)},handler:function(a,b){var g=this,c=arguments,f=function(){a.type="debouncedresize";r.dispatch.apply(g,c)};p&&clearTimeout(p);b?f():p=setTimeout(f,n.threshold)},threshold:100};
Array.prototype.shuffle=function(){for(var a=this.length,b,g;a--;)b=Math.floor(Math.random()*a),g=this[a],this[a]=this[b],this[b]=g;return this};var u=e(k),m=k.Modernizr;e.GridRotator=function(a,b){this.$el=e(b);m.backgroundsize&&(this.$el.addClass("ri-grid-loading"),this._init(a))};e.GridRotator.defaults={rows:4,columns:10,w1024:{rows:3,columns:8},w768:{rows:3,columns:7},w480:{rows:3,columns:5},w320:{rows:2,columns:4},w240:{rows:2,columns:3},step:"random",maxStep:3,preventClick:!0,animType:"random",
animSpeed:800,animEasingOut:"linear",animEasingIn:"linear",interval:3E3,slideshow:!0,onhover:!1,nochange:[],onDraw:function(){},heightToWidthRatio:1,subImg:!1};e.GridRotator.prototype={_init:function(a){this.options=e.extend(!0,{},e.GridRotator.defaults,a);this._config()},_config:function(){var a=this;this.supportTransitions=m.csstransitions;this.supportTransforms3D=m.csstransforms3d;this.transEndEventName={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",
msTransition:"MSTransitionEnd",transition:"transitionend"}[m.prefixed("transition")]+".gridrotator";this.animTypes=this.supportTransforms3D?"fadeInOut slideLeft slideRight slideTop slideBottom rotateLeft rotateRight rotateTop rotateBottom scale rotate3d rotateLeftScale rotateRightScale rotateTopScale rotateBottomScale".split(" "):["fadeInOut","slideLeft","slideRight","slideTop","slideBottom"];this.animType=this.options.animType;"random"===this.animType||this.supportTransforms3D||-1!==e.inArray(this.animType,
this.animTypes)||"showHide"===this.animType||(this.animType="fadeInOut");this.animTypesTotal=this.animTypes.length;this.$list=this.$el.children("ul");var b=0,g=0,c=this.$list.find("img"),f=c.length,d=["#D92727","#FFE433","#0DB8B5"];a.options.subImg&&e("<img/>").error(function(){a.options.subImg=!1}).attr("src",a.options.subImg);c.each(function(){var h=e(this),l=h.attr("src");e("<img/>").load(function(){++b;h.parent().css("background-image","url("+l+")");b+g===f&&(c.remove(),a.$el.removeClass("ri-grid-loading"),
a.$items=a.$list.children("li"),a.$itemsCache=a.$items.clone(),a.itemsTotal=a.$items.length,a.outItems=[],a._layout(function(){a._initEvents()}),a._start())}).attr("src",l);e("<img/>").error(function(){++g;if(a.options.subImg)h.parent().css("background-image","url("+a.options.subImg+")");else{var e=Math.floor(3*Math.random());h.parent().css("background",d[e])}b+g===f&&(c.remove(),a.$el.removeClass("ri-grid-loading"),a.$items=a.$list.children("li"),a.$itemsCache=a.$items.clone(),a.itemsTotal=a.$items.length,
a.outItems=[],a._layout(function(){a._initEvents()}),a._start())}).attr("src",l)})},_layout:function(a){var b=this;this._setGridDim();this.$list.empty();this.$items=this.$itemsCache.clone().appendTo(this.$list);var g=this.$items.filter(":gt("+(this.showTotal-1)+")"),c=g.children("a");this.outItems.length=0;c.each(function(a){b.outItems.push(e(this))});g.remove();for(var c=document.defaultView?parseInt(document.defaultView.getComputedStyle(this.$el.get(0),null).width):this.$el.width(),g=Math.floor(c/
this.columns),c=c-this.columns*Math.floor(g),f=0;f<this.rows;++f)for(var d=0;d<this.columns;++d){var h=this.columns*f+d,l=this.$items.eq(h);l.css({width:d<Math.floor(c)?g+1:g,height:Math.floor(g*this.options.heightToWidthRatio)});-1!==e.inArray(h,this.options.nochange)&&l.addClass("ri-nochange").data("nochange",!0)}if(this.options.preventClick)this.$items.children().css("cursor","default").on("click.gridrotator",!1);a&&a.call();this.options.onDraw.call(this)},_setGridDim:function(){var a=this.$el.width();
switch(!0){case 240>a:this.rows=this.options.w240.rows;this.columns=this.options.w240.columns;break;case 320>a:this.rows=this.options.w320.rows;this.columns=this.options.w320.columns;break;case 480>a:this.rows=this.options.w480.rows;this.columns=this.options.w480.columns;break;case 768>a:this.rows=this.options.w768.rows;this.columns=this.options.w768.columns;break;case 1024>a:this.rows=this.options.w1024.rows;this.columns=this.options.w1024.columns;break;default:this.rows=this.options.rows,this.columns=
this.options.columns}this.showTotal=this.rows*this.columns},_initEvents:function(){var a=this;u.on("debouncedresize.gridrotator",function(){a._layout()});var b=q();b&&(b=b.replace(/[H|h]idden/,"")+"visibilitychange",document.addEventListener(b,function(){a._visChange()}));if(!m.touch&&this.options.onhover)a.$items.on("mouseenter.gridrotator",function(){var b=e(this);b.data("active")||b.data("hovered")||b.data("nochange")||(b.data("hovered",!0),a._replace(b))}).on("mouseleave.gridrotator",function(){e(this).data("hovered",
!1)})},_visChange:function(){var a;a=(a=q())?document[a]:!1;a?clearTimeout(this.playtimeout):this._start()},_start:function(){this.showTotal<this.itemsTotal&&this.options.slideshow&&this._showNext()},_getAnimType:function(){return"random"===this.animType?this.animTypes[Math.floor(Math.random()*this.animTypesTotal)]:this.animType},_getAnimProperties:function(a){var b={},g={},c={},f={},d,e=0;switch(this._getAnimType()){case "showHide":d=0;f.opacity=0;break;case "fadeInOut":f.opacity=0;break;case "slideLeft":b.left=
a.width();c.left=0;f.left=-a.width();break;case "slideRight":b.left=-a.width();c.left=0;f.left=a.width();break;case "slideTop":b.top=a.height();c.top=0;f.top=-a.height();break;case "slideBottom":b.top=-a.height();c.top=0;f.top=a.height();break;case "rotateLeft":d=this.options.animSpeed/2;b.transform="rotateY(90deg)";c.transform="rotateY(0deg)";e=d;f.transform="rotateY(-90deg)";break;case "rotateRight":d=this.options.animSpeed/2;b.transform="rotateY(-90deg)";c.transform="rotateY(0deg)";e=d;f.transform=
"rotateY(90deg)";break;case "rotateTop":d=this.options.animSpeed/2;b.transform="rotateX(90deg)";c.transform="rotateX(0deg)";e=d;f.transform="rotateX(-90deg)";break;case "rotateBottom":d=this.options.animSpeed/2;b.transform="rotateX(-90deg)";c.transform="rotateX(0deg)";e=d;f.transform="rotateX(90deg)";break;case "scale":d=this.options.animSpeed/2;b.transform="scale(0)";g.transform="scale(1)";c.transform="scale(1)";e=d;f.transform="scale(0)";break;case "rotateLeftScale":g.transform="scale(1)";d=this.options.animSpeed/
2;b.transform="scale(0.3) rotateY(90deg)";c.transform="scale(1) rotateY(0deg)";e=d;f.transform="scale(0.3) rotateY(-90deg)";break;case "rotateRightScale":g.transform="scale(1)";d=this.options.animSpeed/2;b.transform="scale(0.3) rotateY(-90deg)";c.transform="scale(1) rotateY(0deg)";e=d;f.transform="scale(0.3) rotateY(90deg)";break;case "rotateTopScale":g.transform="scale(1)";d=this.options.animSpeed/2;b.transform="scale(0.3) rotateX(90deg)";c.transform="scale(1) rotateX(0deg)";e=d;f.transform="scale(0.3) rotateX(-90deg)";
break;case "rotateBottomScale":g.transform="scale(1)";d=this.options.animSpeed/2;b.transform="scale(0.3) rotateX(-90deg)";c.transform="scale(1) rotateX(0deg)";e=d;f.transform="scale(0.3) rotateX(90deg)";break;case "rotate3d":d=this.options.animSpeed/2,b.transform="rotate3d( 1, 1, 0, 90deg )",c.transform="rotate3d( 1, 1, 0, 0deg )",e=d,f.transform="rotate3d( 1, 1, 0, -90deg )"}return{startInProp:b,startOutProp:g,endInProp:c,endOutProp:f,delay:e,animSpeed:d!=t?d:this.options.animSpeed}},_showNext:function(a){var b=
this;clearTimeout(this.playtimeout);this.playtimeout=setTimeout(function(){var a=b.options.step,c=b.options.maxStep;c>b.showTotal&&(c=b.showTotal);for(var a="random"===a?Math.floor(Math.random()*c+1):Math.min(Math.abs(a),c),c=b._getRandom(a,b.showTotal),e=0;e<a;++e){var d=b.$items.eq(c[e]);if(d.data("active")||d.data("nochange"))return b._showNext(1),!1;b._replace(d)}b._showNext()},a||Math.max(Math.abs(this.options.interval),300))},_replace:function(a){a.data("active",!0);var b=this,g=a.children("a:last"),
c={width:g.width(),height:g.height()};a.data("active",!0);var f=this.outItems.shift();this.outItems.push(g.clone().css("transition","none"));f.css(c).prependTo(a);var d=this._getAnimProperties(g);f.css(d.startInProp);g.css(d.startOutProp);this._setTransition(f,"all",d.animSpeed,d.delay,this.options.animEasingIn);this._setTransition(g,"all",d.animSpeed,0,this.options.animEasingOut);this._applyTransition(f,d.endInProp,d.animSpeed,function(){var a=e(this),c=d.animSpeed===b.options.animSpeed&&0===Object.keys(d.endInProp).length?
d.animSpeed:0;setTimeout(function(){b.supportTransitions&&a.off(b.transEndEventName);a.next().remove();a.parent().data("active",!1)},c)},0===d.animSpeed||0===Object.keys(d.endInProp).length);this._applyTransition(g,d.endOutProp,d.animSpeed)},_getRandom:function(a,b){for(var e=[],c=0;c<b;++c)e.push(c);return e.shuffle().slice(0,a)},_setTransition:function(a,b,e,c,f){setTimeout(function(){a.css("transition",b+" "+e+"ms "+c+"ms "+f)},25)},_applyTransition:function(a,b,g,c,f){var d=this;setTimeout(function(){e.fn.applyStyle=
d.supportTransitions?e.fn.css:e.fn.animate;c&&d.supportTransitions&&(a.on(d.transEndEventName,c),f&&c.call(a));c=c||function(){return!1};a.stop().applyStyle(b,e.extend(!0,[],{duration:g+"ms",complete:c}))},25)}};e.fn.gridrotator=function(a){var b=e.data(this,"gridrotator");if("string"===typeof a){var g=Array.prototype.slice.call(arguments,1);this.each(function(){b?e.isFunction(b[a])&&"_"!==a.charAt(0)?b[a].apply(b,g):k.console&&k.console.error("no such method '"+a+"' for gridrotator instance"):k.console&&
k.console.error("cannot call methods on gridrotator prior to initialization; attempted to call method '"+a+"'")})}else this.each(function(){b?b._init():b=e.data(this,"gridrotator",new e.GridRotator(a,this))});return b}})(jQuery,window);
